<!-- Split & Filter Excel App -->
<div class="app-container">
	<mat-card class="header-card">
		<mat-card-header>
			<mat-card-title>üóÇÔ∏è Split & Filter Excel</mat-card-title>
			<mat-card-subtitle>Flujo por etapas para dividir y filtrar archivos Excel</mat-card-subtitle>
		</mat-card-header>
	</mat-card>

	<mat-accordion class="steps-accordion">
		<!-- ==================== PASO 1: SUBIR ARCHIVO ==================== -->
		<app-step1-upload [fileUploaded]="fileUploaded" (fileUpload)="onFileUpload()"> </app-step1-upload>

		<!-- ==================== PASO 2: ELEGIR 'SEPARAR POR' ==================== -->
		<app-step2-separate-by
			[isStepCurrent]="isStepCurrent(2)"
			[canAccessStep]="canAccessStep(2)"
			[isStepCompleted]="isStepCompleted(2)"
			(nextStep)="nextStep()"
		>
		</app-step2-separate-by>

		<!-- ==================== PASO 3: CONFIGURAR FILTROS (OPCIONAL) ==================== -->
		<app-step3-filters
			[isStepCurrent]="isStepCurrent(3)"
			[canAccessStep]="canAccessStep(3)"
			[isStepCompleted]="isStepCompleted(3)"
			(nextStep)="nextStep()"
		>
		</app-step3-filters>

		<!-- ==================== PASO 4: ELEGIR 'DATOS A GUARDAR' ==================== -->
		<app-step4-choose-columns
			[isStepCurrent]="isStepCurrent(4)"
			[canAccessStep]="canAccessStep(4)"
			[isStepCompleted]="isStepCompleted(4)"
			(nextStep)="nextStep()"
		>
		</app-step4-choose-columns>
		<app-step4-choose-columns
			[isStepCurrent]="true"
			[canAccessStep]="true"
			[isStepCompleted]="true"
			(nextStep)="nextStep()"
		>
		</app-step4-choose-columns>

		<!-- ==================== PASO 5: NOMBRE BASE Y DESCARGAR ==================== -->
		<!-- <mat-expansion-panel
			[expanded]="isStepCurrent(5)"
			[disabled]="!canAccessStep(5)">
			<mat-expansion-panel-header>
				<mat-panel-title>
					<mat-icon>{{
						isStepCompleted(5)
							? 'check_circle'
							: isStepCurrent(5)
							? 'radio_button_checked'
							: 'radio_button_unchecked'
					}}</mat-icon>
					&nbsp; 5) Nombre base y descargar
				</mat-panel-title>
				<mat-panel-description *ngIf="baseName">
					{{ baseName }}
				</mat-panel-description>
			</mat-expansion-panel-header> -->
		<div class="step-content">
			<!-- Nombre base -->
			<!-- <mat-form-field
					appearance="outline"
					class="full-width">
					<mat-label>Nombre base para los archivos</mat-label>
					<input
						matInput
						[(ngModel)]="baseName"
						placeholder="datos_separados" />
					<mat-hint>Los archivos se nombrar√°n como: [base] - [columna] - [valor].xlsx</mat-hint>
				</mat-form-field> -->
			<!-- Resumen -->
			<!-- <mat-card class="summary-card">
					<mat-card-header>
						<mat-card-title>üìã Resumen de configuraci√≥n</mat-card-title>
					</mat-card-header>
					<mat-card-content>
						<p><strong>Separar por:</strong> {{ selectedSeparateBy }}</p>
						<p>
							<strong>Filtros:</strong>
							<span *ngIf="selectedFilters.length > 0">ETAPA: {{ selectedFilters.join(', ') }}</span>
							<span *ngIf="selectedFilters.length === 0">Sin filtros</span>
						</p>
						<p><strong>Columnas:</strong> {{ selectedColumns.join(', ') }}</p>
						<p><strong>Nombre base:</strong> {{ baseName }}</p>
					</mat-card-content>
				</mat-card> -->
			<!-- Preview de archivos -->
			<!-- <div class="files-preview">
					<h3>üìÅ Se generar√°n {{ includedPreviewFiles.length }} archivos:</h3>
					<p class="hint">Haz clic en ‚úÖ para excluir archivos que no quieras descargar</p>
					<div class="file-list">
						<mat-card
							*ngFor="let file of previewFiles; let i = index"
							class="file-item"
							[class.excluded]="file.excluded">
							<mat-card-content>
								<button
									mat-icon-button
									(click)="toggleFileExclusion(i)"
									[ngClass]="file.excluded ? 'warn-btn' : 'primary-btn'">
									<mat-icon>{{ file.excluded ? 'cancel' : 'check_circle' }}</mat-icon>
								</button>
								<span [class.excluded-text]="file.excluded">{{ file.name }}</span>
							</mat-card-content>
						</mat-card>
					</div>
				</div> -->
			<!-- Acci√≥n final -->
			<!-- <div class="step-actions final-action">
					<button
						mat-raised-button
						color="accent"
						class="large-btn">
						<mat-icon>download</mat-icon>
						&nbsp; Generar y descargar archivos
					</button>
				</div>
			</div> -->
			<!-- Fin de mat-accordion -->
		</div>
	</mat-accordion>
</div>
